<div class="nopaddingright jumbotron clearfix">
	<h1><span translate>Production</span></h1>

	<div class="row">
		<!-- <div class="col-md-6 nopadding">
			<label class="control-label col-xs-3" translate>Filter by</label>
			<div class="col-xs-4">
				<select name="dd_ty" ng-model="filterOptions.selectedFilter" ng-options="sc as sc.name for sc in filterOptions.columns" class="form-control small" ng-change="clearFilterOption();">
					<option value="">-- choose one --</option>
				</select>
			</div>

			<label class="control-label col-xs-1"></label>
			<div class="col-xs-4">
				<select ng-model="filterOptions.selectedFilterOption" ng-options="sc as sc.value for sc in filterOptions.selectedFilter.options" class="form-control small" ng-change="clearFilterOption();">
					<option value="">-- choose one --</option>
				</select>
			</div>
		</div> -->
		<div class="col-md-6 nopadding">
			<label class="control-label col-xs-3" translate>Order by</label>
			<div class="col-xs-4">
				<select name="dd_ty" ng-model="filterOptions.selectedOrderBy" ng-options="sc as sc.name for sc in filterOptions.columns" class="form-control small" ng-change="clearFilterOption();">
					<option value="">-- choose one --</option>
				</select>
			</div>

			<label class="control-label col-xs-1"></label>
			<div class="col-xs-4">
				<select name="dd_ty" ng-model="filterOptions.selectedOrderType" ng-options="sc as sc.name for sc in filterOptions.orderTypes" class="form-control small" ng-change="clearFilterOption();">
				</select>
			</div>
		</div>

		<div class="col-md-6 nopadding">
			<label class="control-label col-xs-3" translate>Production summary</label>
			<div class="col-xs-4">
				<span class="glyphicon glyphicon-stats control-label" ng-click="showProductionSummaryModal(allProduction)" style="text-align:center; cursor:pointer;"></span>
			</div>
		</div>
	</div>
	<div class="row">
		<div class="col-md-6 nopadding">
			<label class="control-label col-xs-3" translate>Show all</label>
			<div class="col-xs-4">
				<input type="checkbox" ng-model="filterOptions.showAll">
			</div>
		</div>

		<div class="col-md-6 nopadding">
			<label class="control-label col-xs-3" translate>Columns filter</label>
			<div class="col-xs-4">
				<span class="glyphicon glyphicon-cog control-label" ng-click="::oneTimeBindings.togglePopupList('columnsSelector');" style="text-align:center; cursor:pointer;"></span>
			</div>
		</div>
	</div>
	<div class="row">
		<!-- <div class="col-md-6 nopadding">
			<label class="control-label col-xs-3" translate>Show all</label>
			<div class="col-xs-4">
				<input type="checkbox" ng-model="filterOptions.showAll">
			</div>
		</div> -->
	</div>

	<div class="row">
		<div class="col-md-6 nopadding">
				<label class="control-label col-xs-2"></label>

				<div class="col-xs-8">
					<a ng-click="clearFilters()" class="btn btn-default floatright">
						<span class="glyphicon glyphicon-remove"></span>
						{{'Clear filters' | translate}}
					</a>
				</div>

				<div class="col-xs-2">
					<a ng-click="search(1)" class="btn btn-default floatright">
						<span class="glyphicon glyphicon-search"></span>
						{{'Search' | translate}}
					</a>
				</div>
		</div>
	</div>
</div>

<!-- Consumos -->
<!-- <table id="production" class="table table-bordered table-striped table-hover" fixed-header table-height="500px"> -->
<table id="production" class="table table-bordered table-striped table-hover">
	<thead>
		<tr>
			<th class="seller"><div class="rotate"><span translate>Seller col</span></div></th>
			<th class="week"><div class="rotate"><span translate>Week col</span></div></th>
			<th class="priority" access-restricted="vendedor"><div class="rotate"><span translate>Priority col</span></div></th>
			<th class="dispatch"><div class="rotate"><span translate>Dispatch</span></div></th>
			<th class="orderNumber" translate>Order</th>
			<th class="client" translate>Client</th>
			<th class="boat" translate>Boat</th>
			<th class="sailName" translate>Sail</th>
			<th class="line"><div class="rotate"><span translate>Line</span></div></th>
			<th class="percentage"><div><span translate>%</span></div></th>
			<th class="advance"><div class="rotate"><span translate>Advance</span></div></th>
			<th class="deliveryDate" translate style="min-width:95px;">Delivery date min</th>
			<th class="tentativeDate" translate style="min-width:95px;">Tentative date min</th>
			<th class="productionDate" access-restricted="vendedor" translate style="min-width:95px;">Production date min</th>
			<th class="infoDate" translate style="min-width:95px;">Info date min</th>
			<th class="advanceDate" translate style="min-width:95px;">Advance date min</th>
			<th class="cloths" translate>Cloths</th>
			<th class="state" access-restricted="vendedor" translate>State col</th>
			<th class="area" access-restricted="vendedor" translate>Area</th>
			<th class="productionObservations" access-restricted="vendedor" translate>Observations</th>
			<th access-allowed="admin,produccion,velas-od" access-restricted="vendedor" translate>Archive</th>
		</tr>
		<tr class="production-filter">
			<th class="seller"><div><select ng-model="sc.selectedFilterOption1" ng-options="sc as sc.value for sc in ::getOptions('seller')" ng-change="searchByFilter(sc.selectedFilterOption1, 'seller')"><option value="">-</option></select></div></th>
			<th class="week"><div><select ng-model="sc.selectedFilterOption2" ng-options="sc as sc.value for sc in ::getOptions('week')" ng-change="searchByFilter(sc.selectedFilterOption2, 'week')"><option value="">-</option></select></div></th>
			<th class="priority" access-restricted="vendedor"><div><select ng-model="sc.selectedFilterOption3" ng-options="sc as sc.value for sc in ::getOptions('priority')" ng-change="searchByFilter(sc.selectedFilterOption3, 'priority')"><option value="">-</option></select></div></th>
			<th class="dispatch"><div><select ng-model="sc.selectedFilterOption4" ng-options="sc as sc.value for sc in ::getOptions('dispatch')" ng-change="searchByFilter(sc.selectedFilterOption4, 'dispatch')"><option value="">-</option></select></div></th>
			<th class="orderNumber"><div><select ng-model="sc.selectedFilterOption5" ng-options="sc as sc.value for sc in ::getOptions('orderNumber')" ng-change="searchByFilter(sc.selectedFilterOption5, 'orderNumber')"><option value="">-</option></select></div></th>
			<th class="client"><div><select ng-model="sc.selectedFilterOption6" ng-options="sc as sc.value for sc in ::getOptions('client')" ng-change="searchByFilter(sc.selectedFilterOption6, 'client')"><option value="">-</option></select></div></th>
			<th class="boat"><div><select ng-model="sc.selectedFilterOption7" ng-options="sc as sc.value for sc in ::getOptions('boat')" ng-change="searchByFilter(sc.selectedFilterOption7, 'boat')"><option value="">-</option></select></div></th>
			<th class="sailName"><div><select ng-model="sc.selectedFilterOption8" ng-options="sc as sc.value for sc in ::getOptions('sailName')" ng-change="searchByFilter(sc.selectedFilterOption8, 'sailName')"><option value="">-</option></select></div></th>
			<th class="line"><div><select ng-model="sc.selectedFilterOption9" ng-options="sc as sc.value for sc in ::getOptions('line')" ng-change="searchByFilter(sc.selectedFilterOption9, 'line')"><option value="">-</option></select></div></th>
			<th class="percentage"><div><select ng-model="sc.selectedFilterOption10" ng-options="sc as sc.value for sc in ::getOptions('percentage')" ng-change="searchByFilter(sc.selectedFilterOption10, 'percentage')"><option value="">-</option></select></div></th>
			<th class="advance"><div><select ng-model="sc.selectedFilterOption11" ng-options="sc as sc.value for sc in ::getOptions('advance')" ng-change="searchByFilter(sc.selectedFilterOption11, 'advance')"><option value="">-</option></select></div></th>
			<th class="deliveryDate" style="min-width:95px;"><div><select ng-model="sc.selectedFilterOption12" ng-options="sc as sc.value for sc in ::getOptions('deliveryDate')" ng-change="searchByFilter(sc.selectedFilterOption12, 'deliveryDate')"><option value="">-</option></select></div></th>
			<th class="tentativeDate" style="min-width:95px;"><div><select ng-model="sc.selectedFilterOption13" ng-options="sc as sc.value for sc in ::getOptions('tentativeDate')" ng-change="searchByFilter(sc.selectedFilterOption13, 'tentativeDate')"><option value="">-</option></select></div></th>
			<th class="productionDate" access-restricted="vendedor" style="min-width:95px;"><div><select ng-model="sc.selectedFilterOption14" ng-options="sc as sc.value for sc in ::getOptions('productionDate')" ng-change="searchByFilter(sc.selectedFilterOption14, 'productionDate')"><option value="">-</option></select></div></th>
			<th class="infoDate" style="min-width:95px;"><div><select ng-model="sc.selectedFilterOption15" ng-options="sc as sc.value for sc in ::getOptions('infoDate')" ng-change="searchByFilter(sc.selectedFilterOption15, 'infoDate')"><option value="">-</option></select></div></th>
			<th class="advanceDate" style="min-width:95px;"><div><select ng-model="sc.selectedFilterOption16" ng-options="sc as sc.value for sc in ::getOptions('advanceDate')" ng-change="searchByFilter(sc.selectedFilterOption16, 'advanceDate')"><option value="">-</option></select></div></th>
			<th class="cloths"></th>
			<th class="state" access-restricted="vendedor"><div><select ng-model="sc.selectedFilterOption17" ng-options="sc as sc.value for sc in ::getOptions('state')" ng-change="searchByFilter(sc.selectedFilterOption17, 'state')"><option value="">-</option></select></div></th>
			<th class="area" access-restricted="vendedor"><div><select ng-model="sc.selectedFilterOption18" ng-options="sc as sc.value for sc in ::getOptions('area')" ng-change="searchByFilter(sc.selectedFilterOption18, 'area')"><option value="">-</option></select></div></th>
			<th class="productionObservations" access-restricted="vendedor"></th>
			<th class="production-filter" access-allowed="admin,produccion,velas-od" access-restricted="vendedor"></th>
		</tr>
	</thead>
	<tbody>
		<!-- <tr ng-repeat="p in previsions | orderBy:'week' | filter:searchBox" my-repeat-directive="start"> -->
		<tr ng-repeat="p in previsions track by p.id" my-repeat-directive="start" ng-style="::{'background-color': weekBackgroundColor(p)}">
			<td class="seller" ng-show="::visibility.selected('seller')">
				<!-- {{:refreshColumsValue:getValue(p, 'seller')}} -->
				<span ng-bind=":refreshColumnsValue:getValue(p, 'seller')"></span>
				<!-- <div class="popover-wrapper">
			    <a href="#" editable-text="p.seller">{{p.seller || '' }}</a>
			  </div> -->
			</td>
			<td class="week" ng-show="::visibility.selected('week')" ng-mouseover="::oneTimeBindings.showPopupList('weeks');" ng-mouseleave="::oneTimeBindings.hidePopupList('weeks');">
				<!-- {{:refreshColumnsValue:getValue(p, 'week')}} -->
				<editable-production-input entity="::p" field="'week'" callback="::changedPrevision.numericField" editable-by-role="'admin,produccion'" width="20" style="display:inline-block;"></editable-production-input>
			</td>
			<td class="priority" ng-show="::visibility.selected('priority')" access-restricted="vendedor">
				{{:refreshColumnsValue:getValue(p, 'priority')}}
			</td>
			<td class="dispatch" ng-show="::visibility.selected('dispatch')">
				<!-- #{{:refreshColumnsValue:getValue(p, 'dispatch')}} -->
				<a href="javascript:void(0);" ng-click="showDispatchModal({id: p.dispatchId})">{{:refreshColumnsValue:(p.dispatch ? '#' + p.dispatch : '')}}</a>
			</td>
			<td class="orderNumber" ng-show="::visibility.selected('orderNumber')" nowrap>
				<a href="javascript:void(0);" ng-click="showPrevisionModal(p)" access-restricted="vendedor">{{:refreshColumnsValue:p.orderNumber}}</a>
				<span access-allowed="vendedor">{{:refreshColumnsValue:p.orderNumber}}</span>
			</td>
			<td class="client" ng-show="::visibility.selected('client')" nowrap>
				{{:refreshColumnsValue:getValue(p, 'client')}}
			</td>
			<td class="boat" ng-show="::visibility.selected('boat')" nowrap>
				{{:refreshColumnsValue:getValue(p, 'boat')}}
			</td>
			<td class="sailName" ng-show="::visibility.selected('sailName')" nowrap>
				{{:refreshColumnsValue:getValue(p, 'sailName')}}
			</td>
			<td class="line" ng-show="::visibility.selected('line')">
				{{:refreshColumnsValue:getValue(p, 'line')}}
			</td>
			<td class="percentage" ng-show="::visibility.selected('percentage')" style="min-width:30px;" ng-mouseover="::oneTimeBindings.showPopupList('percentages');" ng-mouseleave="::oneTimeBindings.hidePopupList('percentages');">
				<editable-production-input entity="::p" field="'percentage'" callback="::changedPrevision.numericField" editable-by-role="'admin,produccion,velas-od'" width="20" style="display:inline-block;"></editable-production-input>
			</td>
			<td class="advance" ng-show="::visibility.selected('advance')">
				{{:refreshColumnsValue:getValue(p, 'advance')}}
			</td>
			<td class="deliveryDate" ng-show="::visibility.selected('deliveryDate')" class="column-date" nowrap>
				<editable-date entity="::p" field="deliveryDate" callback="::updateDate" editable-by-role="'admin,produccion'" style="display:inline-block;" required="true"></editable-date>
			</td>
			<td class="tentativeDate" ng-show="::visibility.selected('tentativeDate')" class="column-date" nowrap>
				<editable-date entity="::p" field="tentativeDate" callback="::updateDate" editable-by-role="'admin,produccion'" style="display:inline-block;"></editable-date>
			</td>
			<td class="productionDate" ng-show="::visibility.selected('productionDate')" class="column-date" nowrap access-restricted="vendedor">
				<editable-date entity="::p" field="productionDate" callback="::updateDate" editable-by-role="'admin,produccion'" style="display:inline-block;"></editable-date>
			</td>
			<td class="infoDate" ng-show="::visibility.selected('infoDate')" class="column-date" nowrap>
				<editable-date entity="::p" field="infoDate" callback="::updateDate" editable-by-role="'admin,produccion'" style="display:inline-block;"></editable-date>
			</td>
			<td class="advanceDate" ng-show="::visibility.selected('advanceDate')" class="column-date" nowrap>
				<editable-date entity="::p" field="advanceDate" callback="::updateDate" editable-by-role="'admin,produccion'" style="display:inline-block;"></editable-date>
			</td>
			<td class="cloths" ng-show="::visibility.selected('cloths')">
				<prevision-cloths prevision="p" style="display:inline-block;"></prevision-cloths>
			</td>
			<td class="state" ng-show="::visibility.selected('state')" access-restricted="vendedor">
				<!-- {{:refreshColumnsValue:getValue(p, 'state')}} -->
				<span style="color:black; float:right; padding:2px;" ng-style="{'background-color': (p.stateAccepted=='0' ? 'orange' : '')}">
					{{:refreshColumnsValue:getValue(p, 'state')}}
					<a href="javascript:void(0)" ng-show=":refreshStateValue:p.stateAccepted=='0'" ng-click="::oneTimeBindings.acceptStateChange(p); $event.stopPropagation();" style="cursor:pointer;" class="tag-control" access-allowed="admin,produccion">
						<span class="glyphicon glyphicon-ok save-ok control-label" style="text-align:center; margin-left:4px;"></span>
					</a>
				</span>
			</td>
			<td class="area" ng-show="::visibility.selected('area')" access-restricted="vendedor">
				{{:refreshColumnsValue:getValue(p, 'area')}}
			</td>
			<td class="productionObservations" ng-show="::visibility.selected('productionObservations')" style="min-width:110px;" access-restricted="vendedor">
				<editable-production-textarea entity="::p" field="'productionObservations'" callback="::changedPrevision.field" editable-by-role="'admin,produccion'" width="82" style="display:inline-block;"></editable-production-textarea>
			</td>
			<td style="width:80px; text-align:center;" access-allowed="admin,produccion,velas-od">
				<a ng-click="showArchiveConfirmModal(p, null, removeFromProduction)" class="btn btn-default small-button">
					<span class="glyphicon glyphicon-ok"></span>
				</a>
			</td>
		</tr>
		<tr>
			<td colspan="21" ng-show="!hideLoading">
				Cargando...
			</td>
		</tr>
	</tbody>
</table>

<ul id="pagination" class="pagination-sm"></ul>

<!-- <ul id="pagination" class="pagination-sm ng-scope pagination" ng-show="previsions.length == rows">
	<li class="page"><a href="javascript:void(0)" ng-click="::showAll()" translate>Show all</a></li>
</ul> -->

<div>
	<production-weeks/>
</div>

<div>
	<production-percentages/>
</div>

<div>
	<production-columns-selector/>
</div>

<prevision-modal/>

<confirm-modal/>

<confirm-archive-modal/>

<dispatch-modal/>

<production-summary-modal/>
